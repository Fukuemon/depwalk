# GitHub Issue の整理・作成コマンド

## 概要

既存の Issue の内容を整理、または新しい Issue を作成するためのコマンドです。
Issue の種類に応じたテンプレートに沿って、対話的に内容を充足させます。

## 前提条件

- 本コマンドは、現在のリポジトリを対象とする
- Issue メッセージの具体的な書き方は、`.cursor/rules/issue-message-format.mdc` で定義された規約に従うこと
- Issue テンプレートは `.github/ISSUE_TEMPLATE` に存在するテンプレートを使用すること

## 引数

| 引数 | 位置 | 必須 | 説明 |
|---|---|---|---|
| `issue_number` | 1 | - | 整理対象の Issue 番号（省略時は未充足の Issue を検索） |

## 実行手順

### A) Issue 番号が指定された場合

1. 指定された Issue のタイトルから、Issue の種類（機能追加 / バグ報告）を推測する
2. 種類に応じた Issue テンプレート（`.github/ISSUE_TEMPLATE`）を確認する
3. Issue に記載されている内容がテンプレートの内容を満たしていなければ、ユーザーと対話的に内容を整理し、埋めていく
   - コードベースを確認し、内容の叩き台を作成し、ユーザーに確認してもらう
   - 内容が推測できない場合は、無理に作成せず、ユーザーに委ねる
   - ユーザーが回答しやすいように、質問・確認は 1 点ずつ行う
4. コードベースを確認し、記載内容の妥当性を確認する。不明瞭な点があれば、ユーザーに追加の記載をお願いする
5. 内容の作成が完了したら、Issue の内容を更新する

### B) Issue 番号が省略された場合

1. 当該リポジトリのオープンされた Issue を新しい順に確認する
2. 内容が充足していない Issue を選定し、ユーザーに提示する
3. ユーザーが選択した Issue に対して、手順 A) を実行する

## Issue の種類

| 種類 | タイトル形式 | テンプレート |
|---|---|---|
| 機能追加 | `✨ feature: <サマリ>` | `.github/ISSUE_TEMPLATE/feature.yml` |
| バグ報告 | `🐛 bug: <サマリ>` | `.github/ISSUE_TEMPLATE/bug_fix.yml` |

## フォーマット例

### 使用例 1: 特定の Issue を整理

```bash
# Issue 番号を指定
@create-issue 123
```

### 使用例 2: 未充足の Issue を検索して整理

```bash
# Issue 番号を省略
@create-issue
```

### 出力例: 機能追加 Issue

```markdown
# タイトル
✨ feature: ユーザー設定画面に通知設定を追加

# 本文
## 概要
ユーザーが通知の受信設定をカスタマイズできる機能を追加する。

## 完了の定義
ユーザーが設定画面から通知のオン/オフを切り替えられる

## タスク
- [ ] 通知設定のUIコンポーネントを作成
- [ ] 設定の保存・読み込みロジックを実装
- [ ] 通知サービスとの連携を実装

## 追加するモジュール
- NotificationSettings コンポーネント
- useNotificationSettings フック

## 備考
既存の設定画面に新しいセクションとして追加する
```

## ノート

- Issue メッセージのフォーマットや記載の原則は、`.cursor/rules/issue-message-format.mdc` のルールに従ってください
- Issue の種類が不明な場合は、タイトルのプレフィックス（`✨ feature:`, `🐛 bug:`）から判断してください
- 対話的に内容を整理する際は、ユーザーの負担を減らすため、コードベースから推測できる情報は先に提示してください
